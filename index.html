<!DOCTYPE html>
<html>
	<head>
		<title>WP Plugin Interface</title>
		
		<link href="css/bootstrap.min.css" type="text/css" rel="stylesheet"/>
		<script src='js/jquery.min.js'></script>
		<script src='js/bootstrap.min.js'></script>
		 <script src='js/html2canvas.min.js'></script>
		<link href="css/style.css" type="text/css" rel="stylesheet"/>
	</head>
	<body>

		<h1>Hello World</h1>
		<?php

			$zodiac = array(
						'A' => 'Aries',
						'B' => 'Taurus',
						'C' => 'Gemini',
						'D' => 'Cancer',
						'E' => 'Leo',
						'F' => 'Virgo',
						'G' => 'Libra',
						'H' => 'Scorpion',
						'I' => 'Sagittarius',
						'J' => 'Capricorn',
						'K' => 'Aquaris',
						'L' => 'Pieces'

				);

			$zodiac_order = array(
						'1' => 'Aries',
						'2' => 'Taurus',
						'3' => 'Gemini',
						'4' => 'Cancer',
						'5' => 'Leo',
						'6' => 'Virgo',
						'7' => 'Libra',
						'8' => 'Scorpion',
						'9' => 'Sagittarius',
						'10' => 'Capricorn',
						'11' => 'Aquaris',
						'12' => 'Pieces'

				);

			$d1 = array('Sun','Moon','Mars','Mercury','Jupitar','Venus','Saturn','Rahu','Ketu','Ascendant');

			$lengthd1 = array('K','L','C','F','C','L','E','F','L','F');

			$d2 = array('Sun','Moon','Mars','Mercury','Jupitar','Venus','Saturn','Rahu','Ketu','Ascendant');

			$lengthd2 = array('B','I','C','F','G','F','A','B','H','A');

			$rasi = $_GET['rasi'];

			$length_group = "length".$rasi;
			//var_dump($zodiac['A']); die();
			if(!isset($$rasi)){

				echo "No data related found";
				return false;

			}else{

				?>

				<div class="south_box" id="kundali_chart">
					<div class="south_box_cointainer">
						<table class="chart_table">
							<tr>
								<td id="12">
									
									<?php
										//echo $zodiac['L'];
										echo "<img src='icons/pieces.png'>";

										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "L"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
								<td id="1">
									
									<?php
										//echo $zodiac['A'];
										echo "<img src='icons/aries.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "A"){

												echo "<br>".$$rasi[$i-1];
											}
										}

									?>
								</td>
								<td id="2">
									
									<?php
										//echo $zodiac['B'];
										echo "<img src='icons/taurus.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "B"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
								<td id="3">
									
									<?php
										//echo $zodiac['C'];
										echo "<img src='icons/gimini.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "C"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
							</tr>
							<tr>
								<td id="11">
									
									<?php
										//echo $zodiac['K'];
										echo "<img src='icons/aquarius.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "K"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>

								<td colspan="2" rowspan="2"> <?php echo $rasi; ?></td>

								<td id="4">
									
									<?php
										//echo $zodiac['D'];
										echo "<img src='icons/cancer.png'>";

										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "D"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
							</tr>
							<tr>
								<td id="10">
									
									<?php
										//echo $zodiac['J'];
										echo "<img src='icons/capricorn.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "J"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
								<td id="5">
									
									<?php
										//echo $zodiac['E'];
										echo "<img src='icons/leo.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "E"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
							</tr>
							<tr>
								<td id="9">
									
									<?php
										//echo $zodiac['I'];
										echo "<img src='icons/sagittarius.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "I"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
								<td id="8">
									
									<?php
										//echo $zodiac['H'];
										echo "<img src='icons/scorpio.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "H"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
								<td id="7">
									
									<?php
										//echo $zodiac['G'];
										echo "<img src='icons/libra.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "G"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
								<td id="6">
									
									<?php
										//echo $zodiac['F'];
										echo "<img src='icons/virgo.png'>";
										for($i = 1; $i<=10; $i++){

											if($$length_group[$i-1] == "F"){

												echo "<br>".$$rasi[$i-1];
											}
										}
									?>
								</td>
							</tr>
						</table>
					</div>
				</div>

				<button id="convert">
		                Convert to image
		        </button>

		        <div class="image_result">
		            <div id="result">
		            <!-- Result will appear be here -->
		            </div>
		        </div>

				<?php
			}

		?>
		

		<script type="text/javascript">

			//zodiac = array();
			var zodiac = [
						'Aries',
						'Taurus',
						'Gemini',
						'Cancer',
						'Leo',
						'Virgo',
						'Libra',
						'Scorpion',
						'Sagittarius',
						'Capricorn',
						'Aquaris',
						'Pieces'

				];

			var d1 = {

						K: 'Sun',
						L: 'Moon',
						C: 'Mars',
						F: 'Mercury',
						C: 'Jupitar',
						L: 'Venus',
						E: 'Saturn',
						F: 'Rahu',
						L: 'Ketu',
						F: 'Ascendant'			
				};

			var d2 = {

						B: 'Sun',
						I: 'Moon',
						C: 'Mars',
						F: 'Mercury',
						G: 'Jupitar',
						F: 'Venus',
						A: 'Saturn',
						B: 'Rahu',
						H: 'Ketu',
						A: 'Ascendant'
				};
			
			var rasi = "<?php echo $rasi; ?>";

			

			for(i=1; i<=12; i++){

				var check = "";
				//document.getElementById(i).innerHTML  = zodiac[i-1];

				//$('#'+i).append("<br>"+zodiac[i-1]);

				// for(j=1; j<=10; j++){

				// 	if(i == 1){

				// 		planet = "A";
				// 	}else if(i == 2){

				// 		planet = "B";
				// 	}else if(i == 3){

				// 		planet = "C";
				// 	}else if(i == 4){

				// 		planet = "D";
				// 	}else if(i == 5){

				// 		planet = "E";
				// 	}else if(i == 6){

				// 		planet = "F";
				// 	}else if(i == 7){

				// 		planet = "G";
				// 	}else if(i == 8){

				// 		planet = "H";
				// 	}else if(i == 9){

				// 		planet = "I";
				// 	}else if(i == 10){

				// 		planet = "J";
				// 	}else if(i == 11){

				// 		planet = "K";
				// 	}else if(i == 12){

				// 		planet = "L";
				// 	}

					

				// 	if(d2[planet]){


						
				// 		if(check !=""){

				// 			if(d2[planet] != check){

				// 				$('#'+i).append("<br>"+d2[planet]);	
				// 			}else{

								
				// 			}
				// 		}else{

				// 			$('#'+i).append("<br>"+d2[planet]);
				// 		}

				// 		check = d2[planet];
						
				// 	}
					
				//}


				// if(i == 1){
					
				// 	$('#'+i).append("<br>"+d2['A'])
				// 	//document.getElementById(i).innerHTML  = zodiac[i-1] + "<br>" + d2['A'];
				
				// }else if(i == 2){
					
				// 	$('#'+i).append("<br>"+d2['B'])
				// }
				

			}

            //convert table to image
            function convertToImage() {

              html2canvas(document.querySelector("#kundali_chart")).then(canvas => {
                    //document.body.appendChild(canvas)
                    var img = canvas.toDataURL("image/png");
                    document.getElementById("result").innerHTML = '<img id="image" src="'+img+'"/>';
                });

            }

            //click event
            var convertBtn = document.getElementById("convert");
            convertBtn.addEventListener('click', convertToImage);

			

		</script>

		

		

	
	
	</body>
</html>
